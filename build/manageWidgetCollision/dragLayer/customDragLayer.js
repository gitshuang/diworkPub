"use strict";var _dec,_class;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDnd=require("react-dnd"),_cardListDragPreview=require("./cardListDragPreview"),_cardListDragPreview2=_interopRequireDefault(_cardListDragPreview);require("./style.css");var _style={desk_setting_layer:"desk_setting_layer__style___1MXJ4"};function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var s=r[n],i=Object.getOwnPropertyDescriptor(t,s);i&&i.configurable&&void 0===e[s]&&Object.defineProperty(e,s,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var CustomDragLayer=(_dec=(0,_reactDnd.DragLayer)(function(e){return{item:e.getItem(),itemType:e.getItemType(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}}))(_class=function(t){function n(e){_classCallCheck(this,n);var r=_possibleConstructorReturn(this,t.call(this,e));return r.getItemStyles=function(){var e=r.props.clientOffset;if(!e)return{display:"none"};var t="translate("+e.x+"px, "+e.y+"px)";return{transform:t,WebkitTransform:t}},r.state={layerStyle:{display:"none"}},r}return _inherits(n,t),n.prototype.renderItem=function(e,t){switch(e){case"item":return t.cardList?_react2.default.createElement(_cardListDragPreview2.default,{cardListLength:t.cardList.length}):null;default:return null}},n.prototype.componentWillUnmount=function(){cancelAnimationFrame(this.requestedFrame)},n.prototype.getMyItemStyles=function(){requestAnimationFrame(this.getItemStyles)},n.prototype.shouldComponentUpdate=function(e,t){this.props,this.state;return!(!this.props.item||"cardList"!==this.props.item.type||this.props.isDragging===e.isDragging)||!!(this.props.item&&"cardList"===this.props.item.type&&this.props.currentOffset!==e.currentOffset&&e.currentOffset&&1.5<Math.pow(Math.pow(this.props.clientOffset.x-e.clientOffset.x,2)+Math.pow(this.props.clientOffset.y-e.clientOffset.y,2),.5))},n.prototype.render=function(){var e=this.props,t=e.item,r=e.itemType;return e.isDragging&&"cardList"===t.type?-1<navigator.userAgent.indexOf("MSIE")||-1<navigator.userAgent.indexOf("Trident")||-1<navigator.userAgent.indexOf("Edge")?null:_react2.default.createElement("div",{className:_style.desk_setting_layer},_react2.default.createElement("div",{style:this.getItemStyles()},this.renderItem(r,t))):null},n}(_react.Component))||_class;exports.default=CustomDragLayer,module.exports=exports.default;