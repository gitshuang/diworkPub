"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compactLayoutHorizontal=exports.compactLayout=void 0;var _extends=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r},_collision=require("./collision"),_utils=require("./utils"),sortLayout=function(r){return[].concat(r).sort(function(r,t){return r.gridy>t.gridy||r.gridy===t.gridy&&r.gridx>t.gridx?1:r.gridy===t.gridy&&r.gridx===t.gridx?0:-1})},compactItem=function(r,t){var o=_extends({},t);if(0===r.length)return _extends({},o,{gridy:0});for(;;){var i=(0,_collision.getFirstCollision)(r,o);if(i)return o.gridy=i.gridy+i.height,o;if(o.gridy--,o.gridy<0)return _extends({},o,{gridy:0})}},compactLayout=exports.compactLayout=function(r,t){for(var o=sortLayout(r),i=[],e=Array(r.length),n=0,a=o.length;n<a;n++){var g=compactItem(i,o[n]);i.push(g),e[n]=g}return e},getSpaceArea=function r(t,o,i){var e=_extends({},o);return 0===t.length?e:(0,_collision.getFirstCollision)(t,e)?(e.gridx++,e.gridx+o.width>i&&(e.gridx=0,e.gridy++),r(t,e,i)):e},compactLayoutHorizontal=exports.compactLayoutHorizontal=function(r,t,o){for(var i=sortLayout(r),e=[],n=Array(r.length),a=[],g=void 0,d=0;d<i.length;d++)o!==i[d].widgetId?a.push(i[d]):g=i[d];g&&(g.gridy=Math.min((0,_utils.layoutBottom)(a),g.gridy));for(var u=0;u<i.length;u++)o!==i[u].widgetId&&(i[u].gridy=0,i[u].gridx=0);for(var c=0,s=i.length;c<s;c++){var l=void 0;l=o===i[c].widgetId?i[c]:getSpaceArea(e,i[c],t),e.push(l),n[c]=l}return n};