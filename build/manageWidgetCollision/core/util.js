"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHost=exports.hasCardContainInGroups=exports.createActions=exports.createTypes=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.mapStateToProps=mapStateToProps,exports.updateAllMenuList=updateAllMenuList,exports.findById=findById,exports.setDefaultSelected=setDefaultSelected,exports.guid=guid,exports.post=post,exports.postFileCros=postFileCros,exports.get=get,exports.getContext=getContext;var _reduxActions=require("redux-actions");function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function _toArray(e){return Array.isArray(e)?e:Array.from(e)}var createTypes=exports.createTypes=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.reduce(function(e,t){return e[t]=t,e},{})},createActions=exports.createActions=function(e){for(var t=arguments.length,o=Array(1<t?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];var n=[];if("object"===(void 0===e?"undefined":_typeof(e))&&e.namespace){var c=_toArray(o),i=c[0],a=c.slice(1),s={},d=(n=e.namespace.split(".")).reduce(function(e,t){return e[t=t.toUpperCase()]={},e[t]},s);"object"===(void 0===i?"undefined":_typeof(i))?_extends(d,i):a=[i].concat(a),a.reduce(function(e,t){return e[t]=void 0,e},d);var p=(0,_reduxActions.createActions)(s);return n.reduce(function(e,t){return e[t]?e[t]:e},p)}return o=[e].concat(o),_reduxActions.createActions.apply(void 0,_toConsumableArray(o))};function mapStateToProps(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.length?function(o,r){var n=o,e=t.slice(-1)[0].namespace;return e&&(e=e.split("."),o=e.reduce(function(e,t){var o=e[t];return o=o||e},o)),t.reduce(function(e,t){return"string"==typeof t?e[t]=o[t]:"object"===(void 0===t?"undefined":_typeof(t))&&"string"==typeof t.key&&"function"==typeof t.value&&(e[t.key]=t.value(o,r,n)),e},{})}:function(){return{}}}function updateAllMenuList(e,t){e.forEach(function(e){e.menuItems.forEach(function(e){e.children.forEach(function(e){e.children.length?e.children.forEach(function(e){hasCardContainInGroups(t,e.serviceId)?e.hasBeenDragged=!0:e.hasBeenDragged=!1}):hasCardContainInGroups(t,e.serviceId)?e.hasBeenDragged=!0:e.hasBeenDragged=!1})})})}function findById(e,t){for(var o=void 0,r=0;r<e.length;r++){if(e[r].widgetId&&e[r].widgetId===t){o=e[r];break}e[r].children&&findById(e[r].children,t)}return o}function setDefaultSelected(e,t){e.forEach(function(e){e&&3===e.type?t[e.serviceId]&&(t[e.serviceId].selected="1"):e.children&&0!=e.children&&setDefaultSelected(e.children,t)})}function isSameParent(e,t){return e==t}function compareIndex(e,o,r,t,n){var c={},i=0,a=0;return t==n&&(c=findById(e,t)),c.children.forEach(function(e,t){e.widgetId==o&&(i=t),e.widgetId==r&&(a=t)}),i<a}var hasCardContainInGroups=exports.hasCardContainInGroups=function(e,t){var o=!1;return e.forEach(function(e){if(e.children.forEach(function(e){if(e.widgetId===t)return!(o=!0)}),o)return!1}),o};function guid(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"LS-"+(e()+e())+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var fetchTools={params:function(o){try{return Object.keys(o).map(function(e){var t=o[e];switch(void 0===t?"undefined":_typeof(t)){case"object":t=escape(JSON.stringify(t));break;case"undefined":t=""}return e+"="+t}).join("&")}catch(e){return console.log("error in urlParams"),""}},fetch:function(o){function e(e,t){return o.apply(this,arguments)}return e.toString=function(){return o.toString()},e}(function(d,e){return fetch(d,e).then(function(e){return e.ok?e.text().then(function(e){if(e){var t={status:0,msg:"接口请求失败"};try{t=JSON.parse(e)}catch(e){return Promise.reject(new Error("接口返回数据无法解析"))}var o=t,r=o.status,n=o.data,c=o.msg,i=o.errorCode,a={};if(-1<d.indexOf("/ref/diwork/iref_ctr/refInfo"))return Promise.resolve(t);if(r&&"0"!==r){var s=getLocaleIndex();return a=-1<s&&"object"===(void 0===n?"undefined":_typeof(n))?_diff(s+2,n,"set"):n,Promise.resolve(a)}if(i)switch(i){case"000001":logout()}return Promise.reject(c)}return Promise.reject(new Error("接口未返回数据"))}):Promise.reject(new Error("请求失败"))})}),options:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};return _extends({method:(0<arguments.length&&void 0!==e?e:"get").toUpperCase(),credentials:"include",cache:"no-cache",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",isAjax:1}},o)},url:function(e){if(!e)throw new Error("has no url!");return 0!==e.indexOf("http")&&(e=""+getHost()+e),e}};function post(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2],r=(fetchTools.params,fetchTools.fetch),n=fetchTools.options,c=fetchTools.url,i={},a=getLocaleIndex();i=-1<a&&"object"===(void 0===t?"undefined":_typeof(t))||o?_diff(a+2,t,"get"):t;var s=n("post");s.headers["Content-Type"]="application/json;charset=UTF-8";try{s.body=JSON.stringify(i)}catch(e){return Promise.reject(e)}return r(c(e),s)}function postFileCros(e,t){fetchTools.params;var o=fetchTools.fetch,r=fetchTools.options,n=fetchTools.url,c=r("post",{mode:"cors"});delete c.headers;try{c.body=t}catch(e){return Promise.reject(e)}return console.log(c),o(n(e),c)}function get(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=fetchTools.params,r=fetchTools.fetch,n=fetchTools.options,c=fetchTools.url,i=o(t),a=c(e);if("/ref/diwork/iref_ctr/refInfo"===e||-1<e.indexOf("/ref/diwork/iref_ctr/refInfo")){a=e;for(var s=i.split("&"),d={},p=0;p<s.length;++p){var u=s[p].split("=");d[u[0]]=u[1]}return jsonp({url:a,data:d})}i&&(a=a+"?"+i);var l=-1==a.indexOf("?")?"?":"&";return r(a+=l+"tm="+(new Date).getTime(),n())}function jsonp(p){return new Promise(function(t,o){var r="jsonp_"+Date.now(),n=document.getElementsByTagName("head")[0],e=document.createElement("script"),c=p.data||{},i=p.url,a=[];for(var s in c.callback=r,c)a.push(s+"="+c[s]);function d(){window[r]=void 0;var e=document.getElementById(r);n.removeChild(e)}i+=/\?/.test(i)?"&":"?",i+=a.join("&"),e.id=r,e.src=i,e.onerror=function(){o(),d()},window[r]=function(e){t(e),d()},e.type="text/javascript";try{n.appendChild(e)}catch(e){o(e)}})}var getHost=exports.getHost=function(e){var t=0<arguments.length&&void 0!==e?e:"api";return{api:{production:process.env.HOST||"",development:process.env.HOST||"",daily:process.env.HOST||""},yzone:{production:"https://ec.diwork.com",development:"http://web.yyuap.com:91",daily:"https://ec-daily.yyuap.com"},manageTeamEnter:{production:"https://nec.diwork.com/static/home.html#/spaceList/joined?target=pc",development:"http://web.yyuap.com:91/static/home.html#/spaceList/joined?target=pc",daily:"https://ec-daily.yyuap.com/static/home.html#/spaceList/joined?target=pc"},euc:{production:"https://euc.diwork.com",development:"https://idtest.yyuap.com",daily:"https://user-daily.yyuap.com"},user:{production:"https://hr.diwork.com",development:"http://hrcloud.yyuap.com",daily:"https://hr-daily.yyuap.com"},market:{production:"https://market.yonyoucloud.com/market/index#/shopping/orderlist",development:"https://uastest.yyuap.com/market/index#/shopping/orderlist",daily:"https://market-daily.yyuap.com/market/index#/shopping/orderlist"},order:{production:"https://ticket.yonyoucloud.com",development:"https://ticket.yonyoucloud.com",daily:"https://ticket.yonyoucloud.com"},cloundyy:{production:"https://www.yonyoucloud.com",development:"https://cloudtest.yyuap.com",daily:"https://www.yonyoucloud.com"},ref:{production:"https://ms.diwork.com",development:"http://workbench.yyuap.com",daily:"https://ms-daily.yyuap.com"},org:{production:"https://cdn.yonyoucloud.com/pro/diwork",development:"http://workbenchdev.yyuap.com/fe",daily:"https://cdn.yonyoucloud.com/pro/diwork"},upload:{production:"https://bd.diwork.com/manager/file/upload/oss/workbench-image-path-applicationIcon",development:"http://workbenchdev.yyuap.com/manager/file/upload/oss/workbench-image-path-applicationIcon",daily:"http://workbenchdev.yyuap.com/manager/file/upload/oss/workbench-image-path-applicationIcon"},info:{production:"https://ec.diwork.com/static/home.html#/myspeech/personInfo?target=pc",development:"http://web.yyuap.com:91/static/home.html#/myspeech/personInfo?target=pc",daily:"https://ec-daily.yyuap.com/static/home.html#/myspeech/personInfo?target=pc"},speak:{production:"https://ec.diwork.com/static/home.html#/myspeech/index?index=0&target=pc",development:"http://web.yyuap.com:91/static/home.html#/myspeech/index?index=0&target=pc",daily:"https://ec-daily.yyuap.com/static/home.html#/myspeech/index?index=0&target=pc"},honor:{production:"//wsbs.diwork.com/pc/modules/honorZone/ph/index.html",development:"//wsbs.app.yyuap.com/pc/modules/honorZone/ph/index.html",daily:"//wsbs-daily.yyuap.com/pc/modules/honorZone/ph/index.html"},sendHonor:{production:"//wsbs.diwork.com/pc/modules/honorZone/send/index.html",development:"//wsbs.app.yyuap.com/pc/modules/honorZone/send/index.html",daily:"//wsbs-daily.yyuap.com/pc/modules/honorZone/send/index.html"},ticket:{production:"http://wo.diwork.com/ticket/query",development:"http://172.20.9.47:8000/ticket/query",daily:"http://ticket.app.yyuap.com/ticket/query"}}[t][process.env.NODE_ENV]},getLocaleIndex=function(){var e=window.location.pathname,o=["en_US","zh_TW","fr_FR","de_DE","ja_JP"];if(1<e.length)return window.jDiwork&&window.jDiwork.getContext(function(e){var t=e.locale;return o.findIndex(function(e){return e===t})});var t=getContext().locale;return o.findIndex(function(e){return e===t})};function getContext(){return window.diworkContext&&"function"==typeof window.diworkContext?window.diworkContext():{}}