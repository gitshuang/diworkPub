"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IS_IE=exports.hasCardContainInGroups=exports.removeCardByGroupIndexAndCardID=exports.calColWidth=exports.calColCount=exports.isContained=exports.checkCardContainInGroup=exports.checkInContainer=exports.setPropertyValueForCards=exports.calWHtoPx=exports.calGridItemPosition=exports.calGridXY=exports.getCardByGroupIDAndCardID=exports.layoutBottom=exports.getContainerMaxHeight=void 0,exports.findItemById=findItemById,exports.DeferFn=DeferFn;var _lodash=require("lodash"),_lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function findItemById(r,t){for(var e=void 0,n=0;n<r.length&&(r[n].children&&(e=findItemById(r[n].children,t)),!e);n++)if(r[n].widgetId&&r[n].widgetId===t){e=r[n];break}return e}var getContainerMaxHeight=exports.getContainerMaxHeight=function(r,t,e){var n=layoutBottom(r);return n*t+(n-1)*e[1]+2*e[1]},layoutBottom=exports.layoutBottom=function(r){for(var t=0,e=void 0,n=0,o=r.length;n<o;n++)t<(e=r[n].gridy+r[n].height)&&(t=e);return t},getCardByGroupIDAndCardID=exports.getCardByGroupIDAndCardID=function(r,t,e){var n={},o={};return r.forEach(function(r){if(r.widgetId===t)return n=r,!1}),n.children.forEach(function(r){if(r.widgetId===e)return o=r,!1}),o};Array.prototype.distinct=function(){var r,t=this,e={},n=[];t.length;for(r=0;r<t.length;r++)e[t[r]]||(e[t[r]]=1,n.push(t[r]));return n};var calGridXY=exports.calGridXY=function(r,t,e,n,o,i,a){var d=Math.floor(r/o*i),u=Math.floor(t/(a+(n?n[1]:0)));return checkInContainer(d,u,i,e)},calGridItemPosition=exports.calGridItemPosition=function(r,t,e,n,o){return{x:Math.round(r*o+e[0]*(r+1)),y:Math.round(t*n+e[1]*(t+1))}},calWHtoPx=exports.calWHtoPx=function(r,t,e,n,o){return{wPx:Math.round(r*o+(r-1)*e[0]),hPx:Math.round(t*n+(t-1)*e[1])}},setPropertyValueForCards=exports.setPropertyValueForCards=function(r,e,n){_lodash2.default.forEach(r,function(r,t){_lodash2.default.forEach(r.children,function(r){r[e]=n})})},checkInContainer=exports.checkInContainer=function(r,t,e,n){return e-1<r+n&&(r=e-n),r<0&&(r=0),t<0&&(t=0),{gridX:r,gridY:t}},checkCardContainInGroup=exports.checkCardContainInGroup=function(r,t){var e=!1;return r.children.forEach(function(r){r.widgetId===t&&!1===r.isShadow&&(e=!0)}),e},isContained=exports.isContained=function(r,t){if(!(r instanceof Array&&t instanceof Array))return!1;if(r.length<t.length)return!1;for(var e=r.toString(),n=0,o=t.length;n<o;n++)if(-1==e.indexOf(t[n]))return!1;return!0},calColCount=exports.calColCount=function(r,t,e,n){if(n)return Math.floor((t-2*e[0]-n[0])/(r+n[0]))},calColWidth=exports.calColWidth=function(r,t,e,n){return n?(r-2*e[0]-n[0]*(t+1))/t:(r-2*e[0]-0*(t+1))/t},deferFnInterval=void 0;function DeferFn(r){deferFnInterval=(new Date).getTime(),setTimeout(function(){500<=(new Date).getTime()-deferFnInterval&&r()},500)}var removeCardByGroupIndexAndCardID=exports.removeCardByGroupIndexAndCardID=function(r,t,e){var n=t;return _lodash2.default.remove(r[n].children,function(r){return r.widgetId===e})[0]},hasCardContainInGroups=exports.hasCardContainInGroups=function(r,t){var e=!1;return r.forEach(function(r){if(r.children.forEach(function(r){if(r.serviceCode===t)return!(e=!0)}),e)return!1}),e},IS_IE=exports.IS_IE=!!window.ActiveXObject||"ActiveXObject"in window;