"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_reactRouterDom=require("react-router-dom"),_reactDnd=require("react-dnd"),_update=require("react/lib/update"),_update2=_interopRequireDefault(_update),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_icon=require("../../icon"),_icon2=_interopRequireDefault(_icon),_button=require("../../bee/button"),_button2=_interopRequireDefault(_button);require("./style.css");var _style={widgetItem:"widgetItem__style___2cyTQ",widgetFileItem:"widgetFileItem__style___tICaL",title:"title__style___zm0G2",title_right:"title_right__style___UBFBm",file_title_right:"file_title_right__style___19Ee7",widget_node:"widget_node__style___ToqKk",content:"content__style___2LRlu",context:"context__style___3qrT9",bottom:"bottom__style___11bvF",file_context:"file_context__style___3J9Fp",footer:"footer__style___1aaeU",editDele:"editDele__style___2JgLz",title_cont:"title_cont__style___1Rfqr",edit_cont:"edit_cont__style___j4ID9",edit_btn:"edit_btn__style___1Gga9",title_edit:"title_edit__style___2H-6e",clearfix:"clearfix__style___3Dpug",addModule:"addModule__style___2YCGI",widgetList:"widgetList__style___3skJU",pop_dialog_widge_list:"pop_dialog_widge_list__style___3h0GN",btn:"btn__style___2hXhq"},_widgetItem=require("./widgetItem"),_widgetItem2=_interopRequireDefault(_widgetItem),_widgeFileItem=require("./widgeFileItem"),_widgeFileItem2=_interopRequireDefault(_widgeFileItem),_pop=require("../../pop"),_pop2=_interopRequireDefault(_pop),_manageSelectWidgetList=require("../manageSelectWidgetList"),_manageSelectWidgetList2=_interopRequireDefault(_manageSelectWidgetList);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),i=0;i<r.length;i++){var o=r[i],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var WidgetList=function(t){function r(e){_classCallCheck(this,r);var p=_possibleConstructorReturn(this,t.call(this,e));return p.addFolderFn=function(e){(0,p.props.addFolder)({groupIndex:e})},p.openSelectWidget=function(){p.setState({showModal:!0})},p.savePosition=function(e,t){p.setState({checkId:e,moveLine:t})},p.moveLine=function(e,t){return e==p.state.checkId?t:"none"},p.moveItemDrag=function(e,t,r,i,o,a,l,d,n){var s={id:e,preParentId:t,preType:r,afterId:i,parentId:o,afterType:a,ifIntoFile:l,timeFlag:d,dataFolder:n},_=p.props,c=_.moveService,u=_.openFolder;c(s),3===r&&2===a&&d&&n&&u(n)},p.addFolderDrag=function(e,t,r,i,o,a,l){var d={groupIndex:e,id:t,preParentId:r,preType:i,afterId:o,parentId:a,afterType:l};(0,p.props.addFolder)(d)},p.editTitle=function(e,t){var r={id:e,name:t};(0,p.props.editTitle)(r)},p.widgeOnclick=function(e,t){var r=p.props,i=r.index;(0,r.setCurrGroupIndex)(i),"file"==e.target.getAttribute("name")&&p.props.openFolder(t)},p.popSave=function(e){},p.popClose=function(){p.setState({showModal:!1})},p.state={showModal:!1,moveLine:"none",checkId:""},p}return _inherits(r,t),r.prototype.render=function(){var a=this,e=this.props,t=e.manageList,r=e.curEditFolderId,i=e.selectList,o=e.selectGroup,l=e.currEditonlyId,d=e.title,n=e.drag,s=e.dragState,_=e.deleteFolder,c=e.renameFolder,u=e.setFolderEdit,p=e.selectListActions,g=e.selectGroupActions,f=e.cancelFolderEdit,m=e.openFolder,y=e.setEditonlyId,I=e.setDragInputState,v=e.addFolder,w=e.delectService,h=e.applicationsMap,F=e.allServicesByLabelGroup,b=e.getAllServicesByLabelGroup,L=e.setCurrentSelectWidgetMap,S=e.addDesk,q=e.requestSuccess,D=e.requestError,x=e.currGroupIndex,E=e.folderBgSrc,O=e.languagesJSON,k={manageList:t,curEditFolderId:r,selectList:i,selectGroup:o,currGroupIndex:x,title:d,drag:n,deleteFolder:_,renameFolder:c,setFolderEdit:u,selectListActions:p,selectGroupActions:g,addFolder:v,delectService:w},C={manageList:t,curEditFolderId:r,selectList:i,selectGroup:o,currEditonlyId:l,drag:n,dragState:s,deleteFolder:_,renameFolder:c,setFolderEdit:u,selectListActions:p,selectGroupActions:g,cancelFolderEdit:f,openFolder:m,setEditonlyId:y,setDragInputState:I,folderBgSrc:E},T={applicationsMap:h,manageList:t,allServicesByLabelGroup:F,getAllServicesByLabelGroup:b,setCurrentSelectWidgetMap:L,deleteFolder:_,addDesk:S,requestSuccess:q,requestError:D},G=this.props,R=G.data,P=G.index,M=R.map(function(t,e){var r=t.type,i=t.parentId,o=t.widgetId;t.widgetName;switch(r){case 2:return _react2.default.createElement(_widgeFileItem2.default,_extends({key:"widget-file-"+o+"-"+e,data:t,id:o,parentId:i,index:o,drag:n,propsIndex:P,type:r,savePosition:a.savePosition,moveLine:a.moveLine(o,a.state.moveLine),moveItemDrag:a.moveItemDrag,editTitle:a.editTitle,onClick:function(e){a.widgeOnclick(e,t)}},C,{languagesJSON:O}));default:return _react2.default.createElement(_widgetItem2.default,_extends({ref:o,drag:n,key:"widget-"+o+"-"+e,data:t,id:o,parentId:i,index:o,propsIndex:P,type:r,savePosition:a.savePosition,moveLine:a.moveLine(o,a.state.moveLine),moveItemDrag:a.moveItemDrag,editTitle:a.editTitle,addFolderDrag:a.addFolderDrag},k,{languagesJSON:O}))}});return _react2.default.createElement("ul",{className:_style.widgetList+" "+_style.clearfix},M,_react2.default.createElement("div",{className:_style.addModule,onClick:this.openSelectWidget},_react2.default.createElement(_icon2.default,{title:O.addQuick_to_home,type:"add"})),_react2.default.createElement(_pop2.default,{className:_style.pop_dialog_widge_list,type:"info",title:O.addQuick_to_home,close:this.popClose,backdrop:!1,show:this.state.showModal,data:{}},_react2.default.createElement(_manageSelectWidgetList2.default,_extends({close:this.popClose,parentId:this.props.parentId},T,{languagesJSON:O}))))},r}(_react.Component);exports.default=WidgetList,module.exports=exports.default;