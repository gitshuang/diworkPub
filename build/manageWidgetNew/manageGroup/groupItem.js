"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_menus=require("../../bee/menus"),_menus2=_interopRequireDefault(_menus),_message=require("../../bee/message"),_message2=_interopRequireDefault(_message),_icon=require("pub-comp/icon"),_icon2=_interopRequireDefault(_icon),_dropdown=require("../../bee/dropdown"),_dropdown2=_interopRequireDefault(_dropdown);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var GroupItem=function(o){function a(){var e,p;_classCallCheck(this,a);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=p=_possibleConstructorReturn(this,o.call.apply(o,[this].concat(r)))).openRenameGroupFn=function(e){(0,p.props.setEditonlyId)(e),setTimeout(function(){p.refs.groupName.focus(),p.refs.groupName.select()},0),p.setState({inFoucs:!1})},p.renameGroupCancel=function(e){var t=p.props,r=t.renameGroup,n=t.setEditonlyId,o=p.props.data.widgetName,a=p.state.groupName;p.setState({groupName:o||a}),n(""),o||r({index:e,name:a}),p.setState({inFoucs:!1})},p.renameGroupFn=function(e){var t=p.props,r=t.renameGroup,n=t.manageList,o=t.languagesJSON,a=p.state.groupName;return a==n[e].widgetName?(p.renameGroupCancel(e),!1):n.map(function(e,t){return e.widgetName}).includes(a)?(_message2.default.create({content:o.group_name_exists,duration:1.5,position:"topLeft",color:"warning",style:{height:"auto"}}),!1):(r({index:e,name:a}),void p.renameGroupCancel(e))},p.clearInput=function(){p.setState({groupName:""})},p.editGroupName=function(e){var t=e.target.value;p.setState({groupName:t})},p.handleFocus=function(){p.setState({inFoucs:!0});var e=p.props,t=e.setDragInputState;e.dragState&&t(!1)},p.handleBlur=function(){p.setState({inFoucs:!1});var e=p.props,t=e.setDragInputState;e.dragState||t(!0)},p.selectFn=function(e,r){var t=p.props,n=t.selectListActions,o=t.manageList,a=t.selectList,u=t.selectGroup,i=t.selectGroupActions,c=e,s=o[r].children.map(function(e,t){return e.widgetId});c?(u.push(r),i(u),a=window.ActiveXObject||"ActiveXObject"in window?Array.from(a.concat(s).distinct()):Array.from(new Set(a.concat(s)))):(a=a.filter(function(e){return!s.includes(e)}),i(u.filter(function(e,t){return r!==e})));n(a)},p.popOpen=function(){p.setState({showModal:!0})},p.popClose=function(){p.setState({showModal:!1})},p.moveTopFn=function(e){(0,p.props.moveTopGroup)(e)},p.moveBottomFn=function(e){(0,p.props.moveBottomGroup)(e)},p.delectGroupFn=function(e){(0,p.props.delectGroup)(e)},p.onDropSelect=function(t){return function(e){switch(e.key){case"1":p.moveBottomFn(t);break;case"2":p.moveTopFn(t);break;default:p.delectGroupFn(t)}}},p.renderDrop=function(e){var t=p.props,r=t.manageList,n=t.languagesJSON,o=_react2.default.createElement(_menus2.default,{onClick:p.onDropSelect(e)},e!==r.length-1?_react2.default.createElement(_menus.Item,{key:"1"},n.move_down):null,e?_react2.default.createElement(_menus.Item,{key:"2"},n.move_up):null,_react2.default.createElement(_menus.Item,{key:"3"},n.delete));return _react2.default.createElement(_dropdown2.default,{trigger:["click"],overlay:o,animation:"slide-up"},_react2.default.createElement("div",null,_react2.default.createElement(_icon2.default,{title:n.more,type:"more"})))},_possibleConstructorReturn(p,e)}return _inherits(a,o),a.prototype.addGroupFn=function(e){(0,this.props.addGroup)({index:e})},a}(_react.Component);exports.default=GroupItem,module.exports=exports.default;