"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _dec,_class,_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_icon=require("pub-comp/icon"),_icon2=_interopRequireDefault(_icon);require("./style.css");var _style={widgetItem:"widgetItem__style___1TZRU",widgetFileItem:"widgetFileItem__style___3aYXU",title:"title__style___3mTID",title_right:"title_right__style___2_nSB",file_title_right:"file_title_right__style___d4ef_",widget_node:"widget_node__style___3KtrV",content:"content__style___2IGI-",context:"context__style___mKQQ2",bottom:"bottom__style___qEihN",file_context:"file_context__style___3qf7s",footer:"footer__style___IlBvD",editDele:"editDele__style___2b3y7",title_cont:"title_cont__style___3oqUh",edit_cont:"edit_cont__style___3vuV1",edit_btn:"edit_btn__style___HLMAv",title_edit:"title_edit__style___1fShV",clearfix:"clearfix__style___2UztU",addModule:"addModule__style___241SG",widgetList:"widgetList__style___1m_e4",pop_dialog_widge_list:"pop_dialog_widge_list__style___bJ5Eb",btn:"btn__style___3vqT7"},_widgetItem=require("./widgetItem"),_widgetItem2=_interopRequireDefault(_widgetItem),_pop=require("pub-comp/pop"),_pop2=_interopRequireDefault(_pop),_manageSelectWidgetList=require("../manageSelectWidgetList"),_manageSelectWidgetList2=_interopRequireDefault(_manageSelectWidgetList),_reactRedux=require("react-redux"),_u=require("@u"),_actions=require("store/root/manage/actions"),_actions2=_interopRequireDefault(_actions);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defaults(e,t){for(var i=Object.getOwnPropertyNames(t),r=0;r<i.length;r++){var o=i[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var moveService=_actions2.default.moveService,setCurrGroupIndex=_actions2.default.setCurrGroupIndex,editTitle=_actions2.default.editTitle,selectListActions=_actions2.default.selectListActions,selectGroupActions=_actions2.default.selectGroupActions,setEditonlyId=_actions2.default.setEditonlyId,setDragInputState=_actions2.default.setDragInputState,delectService=_actions2.default.delectService,updateShadowCard=_actions2.default.updateShadowCard,WidgetList=(_dec=(0,_reactRedux.connect)((0,_u.mapStateToProps)("manageList","drag","dragState","selectList","selectGroup","currEditonlyId","currGroupIndex","title",{namespace:"manage"}),{moveService:moveService,setCurrGroupIndex:setCurrGroupIndex,editTitle:editTitle,selectListActions:selectListActions,selectGroupActions:selectGroupActions,setEditonlyId:setEditonlyId,setDragInputState:setDragInputState,delectService:delectService,updateShadowCard:updateShadowCard}))(_class=function(t){function i(e){_classCallCheck(this,i);var _=_possibleConstructorReturn(this,t.call(this,e));return _.openSelectWidget=function(){_.setState({showModal:!0})},_.savePosition=function(e,t){_.setState({checkId:e,moveLine:t})},_.moveLine=function(e,t){return e==_.state.checkId?t:"none"},_.moveItemDrag=function(e,t,i,r,o,a,s){var n={id:e,preParentId:t,preType:i,afterId:r,parentId:o,afterType:a,monitor:s};(0,_.props.moveService)(n)},_.editTitle=function(e,t){var i={id:e,name:t};(0,_.props.editTitle)(i)},_.popClose=function(){_.setState({showModal:!1})},_.state={showModal:!1,moveLine:"none",checkId:""},_}return _inherits(i,t),i.prototype.render=function(){var a=this,e=this.props,t=e.manageList,i=e.selectList,r=e.selectGroup,o=e.title,s=e.selectListActions,n=e.selectGroupActions,_=e.delectService,l=e.applicationsMap,c=e.allServicesByLabelGroup,d=e.getAllServicesByLabelGroup,u=e.setCurrentSelectWidgetMap,p=e.addDesk,f=e.requestSuccess,g=e.requestError,m=e.currGroupIndex,y=e.languagesJSON,v={manageList:t,selectList:i,selectGroup:r,currGroupIndex:m,title:o,selectListActions:s,selectGroupActions:n,delectService:_,updateShadowCard:e.updateShadowCard},S={applicationsMap:l,manageList:t,allServicesByLabelGroup:c,getAllServicesByLabelGroup:d,setCurrentSelectWidgetMap:u,addDesk:p,requestSuccess:f,requestError:g},h=this.props,I=h.data,w=h.index,b=I.map(function(e,t){var i=e.type,r=e.parentId,o=e.widgetId;return _react2.default.createElement(_widgetItem2.default,_extends({ref:o,key:"widget-"+o+"-"+t,data:e,id:o,drag:e.drag,parentId:r,index:t,propsIndex:w,type:i,savePosition:a.savePosition,moveLine:a.moveLine(o,a.state.moveLine),moveItemDrag:a.moveItemDrag,editTitle:a.editTitle},v,{languagesJSON:y}))});return _react2.default.createElement("ul",{className:_style.widgetList+" "+_style.clearfix},b,_react2.default.createElement(_pop2.default,{className:_style.pop_dialog_widge_list,type:"info",title:y.addQuick_to_home,close:this.popClose,backdrop:!1,show:this.state.showModal,data:{}},_react2.default.createElement(_manageSelectWidgetList2.default,_extends({close:this.popClose,parentId:this.props.parentId},S,{languagesJSON:y}))))},i}(_react.Component))||_class;exports.default=WidgetList,module.exports=exports.default;